% Copyright 2008 by Till Tantau and others Wibrow
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\usetikzlibrary{decorations.markings}


%
% General management
%

\tikzset{
  to path with symbol on it/.style={
    to path={
      decorate [decoration={markings,mark connection node=mark node}]
      {-- (\tikztotarget) \tikztonodes}
    },
  },
  symbol on to path/.code 2 args={%
    \pgfkeysalso{to path with symbol on it}
    \edef\tikz@marshal{mark=at position \ifx\tikz@time\pgfutil@empty0.5\else\tikz@time\fi\space with}%
    \def\tikz@marshala{decoration=}%
    \expandafter\expandafter\expandafter\tikzset%
    \expandafter\expandafter\expandafter{\expandafter\tikz@marshala\expandafter{\tikz@marshal{\node[name=mark node,#1]{#2};}}}
  },
  symbol along to path/.style 2 args={symbol on to path={transform shape,#1}{#2}},
  symbol at end to path/.style 2 args={
    to path={
      node[at=(\tikztotarget),alias=circuit path node,#1]{#2} -- (circuit path node) \tikztonodes
    }
  },
}


%
% Labels
%

\tikzset{
  label'/.code={\pgfutil@ifnextchar[\tikz@lib@circ@labp@plain{\tikz@lib@circ@labp@plain[]}#1\pgf@stop},%}
  label sloped/.code={\pgfutil@ifnextchar[\tikz@lib@circ@lab@sloped@plain{\tikz@lib@circ@lab@sloped@plain[]}#1\pgf@stop},%}
  label' sloped/.code={\pgfutil@ifnextchar[\tikz@lib@circ@lab@slopedp@plain{\tikz@lib@circ@lab@slopedp@plain[]}#1\pgf@stop},%}
  circuit declare unit/.style 2 args={
    #1/.code={\pgfutil@ifnextchar[\tikz@lib@circ@lab{\tikz@lib@circ@lab[]}##1\pgf@stop{#2}},%}
    #1 sloped/.code={\pgfutil@ifnextchar[\tikz@lib@circ@lab@sloped{\tikz@lib@circ@lab@sloped[]}##1\pgf@stop{#2}},%}
    #1'/.code={\pgfutil@ifnextchar[\tikz@lib@circ@labp{\tikz@lib@circ@labp[]}##1\pgf@stop{#2}},%} 
    #1' sloped/.code={\pgfutil@ifnextchar[\tikz@lib@circ@lab@slopedp{\tikz@lib@circ@lab@slopedp[]}##1\pgf@stop{#2}}%}
  },
  circuit declare unit={ampere}{A},
  circuit declare unit={volt}{V},
  circuit declare unit={ohm}{\Omega},
  circuit declare unit={siemens}{S},
  circuit declare unit={second}{s},
  circuit declare unit={henry}{H},
  circuit declare unit={farad}{F},
  circuit declare unit={coulomb}{C},
  circuit declare unit={voltampere}{VA},
  circuit declare unit={watt}{W},
  circuit declare unit={hertz}{Hz},
  circuit declare unit={radian}{rad},
  circuit declare unit={radsec}{\frac{\radian}{\second}},
}

\def\tikz@lib@circ@lab[#1]#2\pgf@stop#3{\tikzset{label={[#1]$\mathrm{#2#3}$}}}
\def\tikz@lib@circ@lab@sloped[#1]#2\pgf@stop#3{\tikzset{label={[transform shape,#1]$\mathrm{#2#3}$}}}
\def\tikz@lib@circ@labp[#1]#2\pgf@stop#3{\tikzset{label={[#1]below:$\mathrm{#2#3}$}}}
\def\tikz@lib@circ@lab@slopedp[#1]#2\pgf@stop#3{\tikzset{label={[transform shape,#1]below:$\mathrm{#2#3}$}}}

\def\tikz@lib@circ@lab@sloped@plain[#1]#2\pgf@stop{\tikzset{label={[transform shape,#1]#2}}}
\def\tikz@lib@circ@labp@plainp[#1]#2\pgf@stop{\tikzset{label={[#1]below:#2}}}
\def\tikz@lib@circ@lab@slopedp@plain[#1]#2\pgf@stop{\tikzset{label={[transform shape,#1]below:#2}}}




%
% Basic theming
%

\tikzset{
  every circuit symbol/.style={thick},
  open symbol/.style={draw,fill=white},
  filled symbol/.style={draw,fill=black},
}



%
% Resistors
%

\tikzset{
  resistor node/.style={
    every circuit symbol/.try,
    open symbol,
    minimum width=40pt,minimum height=15pt,inner sep=0pt,
    every resistor node/.try
  },
  resistor/.style={symbol along to path={resistor node,#1}{}}
}



%
% Inductors
%

\tikzset{
  inductor node/.style={
    every circuit symbol/.try,
    filled symbol,
    minimum width=40pt,minimum height=15pt,inner sep=0pt,
    every resistor node/.try
  },
  inductor/.style={symbol along to path={inductor node,#1}{}}
}



%
% Links and connections
%

\tikzset{
  link node/.style={
    every circuit symbol/.try,
    filled symbol,
    minimum size=4pt,inner sep=0pt,outer sep=0pt,circle,
    every join node/.try
  },
  link/.style={link node,#1}
}

\tikzset{
  connection node/.style={
    every circuit symbol/.try,
    open symbol,
    minimum size=6pt,inner sep=0pt,outer sep=0pt,circle,
    every join node/.try
  },
  connection/.style={connection node,#1,symbol at end to path={connection node,#1}{}}
}


\endinput

