% Copyright 2008 by Till Tantau and others Wibrow
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\usetikzlibrary{circuits}
\usepgflibrary{shapes.gates.ee}


%
% Setting up an ee circuit
%
\tikzset{
  circuit ee/.style={
    circuit,
    every circuit ee/.try
  }
}       


%
% The default symbols (you need to load a sublib to install the actual rendering).
%

\tikzset{
  circuit declare symbol = resistor,
  circuit declare symbol = inductor,
  circuit declare symbol = capacitor,
  circuit declare symbol = link,
  circuit declare symbol = connection,
  circuit declare symbol = ground,
  circuit declare symbol = battery,
  circuit declare symbol = diode,
  circuit declare symbol = Zener diode,
  circuit declare symbol = bulb,
  circuit declare symbol = current source,
  circuit declare symbol = voltage source,
  circuit declare symbol = direction,
  circuit declare symbol = direction',
  circuit declare symbol = make contact,
  circuit declare symbol = break contact,
  %
  direction graphic  = direction ee graphic,
  direction' graphic = direction' ee graphic,
}


%
% The default labels
%

\tikzset{
  circuit declare unit={ampere}{A},
  circuit declare unit={volt}{V},
  circuit declare unit={ohm}{\Omega},
  circuit declare unit={siemens}{S},
  circuit declare unit={henry}{H},
  circuit declare unit={farad}{F},
  circuit declare unit={coulomb}{C},
  circuit declare unit={voltampere}{VA},
  circuit declare unit={watt}{W},
  circuit declare unit={hertz}{Hz},
}



%
% The direction and arrow settings
%

\tikzset{
  % This arrow will generally be used to indicate directions in a circuit:
  direction arrow/.initial  = direction ee,
}



\tikzset{
  %
  % Setup the 
  direction ee graphic/.style = {
    shape=direction ee,
    circuit symbol filled,
    circuit symbol size=width .5 height .5,
    transform shape
  },
  direction' ee graphic/.style = {
    direction ee graphic,
    rotate=180
  },
  direction ee arrow = \pgfkeysvalueof{/tikz/direction arrow},
  direction ee size  = .5\tikzcircuitssizeunit,
}



%
% Drawing "along" arrows
%

\tikzset{
  direction info/.default={->},
  direction info/.style={
    append after command={%
      \bgroup
        [current point is local=true] 
        [>=\pgfkeysvalueof{/tikz/direction arrow}]
        [every direction/.try]
        [shift={(\tikzlastnode.north)}]
        \pgfextra{\pgfmathsetmacro\tikz@circ@temp{\pgfkeysvalueof{/pgf/inner ysep}}}
        (-1.25\tikzcircuitssizeunit,.5*\tikz@circ@temp pt) edge[line to,#1] (1.25\tikzcircuitssizeunit,.5*\tikz@circ@temp pt)
      \egroup%
    }
  },
  direction info'/.default={->},
  direction info'/.style={
    append after command={%
      \bgroup
        [current point is local=true] 
        [>=\pgfkeysvalueof{/tikz/direction arrow}]
        [every direction/.try]
        [shift={(\tikzlastnode.south)}]
        \pgfextra{\pgfmathsetmacro\tikz@circ@temp{\pgfkeysvalueof{/pgf/inner ysep}}}
        (-1.25\tikzcircuitssizeunit,-.5*\tikz@circ@temp pt) edge[line to,#1] (1.25\tikzcircuitssizeunit,-.5*\tikz@circ@temp pt)
      \egroup%
    }
  }
}

\endinput

