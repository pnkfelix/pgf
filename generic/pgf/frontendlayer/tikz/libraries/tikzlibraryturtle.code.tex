% Copyright 2008 by Till Tantau
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\ProvidesFileRCS[v\pgfversion] $Header: /cvsroot/pgf/pgf/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryturtle.code.tex,v 1.2 2008/06/17 21:23:44 tantau Exp $




% The current angle is stored in this key.
\tikzset{turtle direction/.code=\gdef\tikz@lib@turtle@dir{#1},turtle direction=90}

% The current angle is stored in this key.
\tikzset{turtle distance/.initial=1cm}

% The to path options that are used to move the turtle
\tikzset{every turtle movement/.style=}

% Let the turtle jump home
\tikzset{turtle home/.style={after option path={(0,0) [turtle direction=90]}}}

% Moves the turtle forward by the given distance or, if no distance is
% given, by turtle distance
\tikzset{
  turtle forward/.default=\pgfkeysvalueof{/tikz/turtle distance},
  turtle forward/.code={%
    % setup how
    \pgfkeysalso{
      turtle to path options/.style=,
      how/.style={turtle to path options/.style=##1},
      every turtle movement}
    % Ok, compute new position
    \pgf@process{\pgfpointadd{\tikz@last@position}{\pgfpointpolar{\tikz@lib@turtle@dir}{#1}}}%
    \edef\tikz@marshal{\noexpand\pgfkeysalso{after option path={to[line to,turtle to path options](\the\pgf@x,\the\pgf@y)}
      }}%
    \tikz@marshal%
  }
}



% Moves the turtle backward by the given distance or, if no distance is
% given, by turtle distance
\tikzset{
  turtle back/.default=\pgfkeysvalueof{/tikz/turtle distance},
  turtle back/.style={turtle forward=-#1}
}



% Turns the turle left by the given number of degrees
\tikzset{
  turtle left/.default=90,
  turtle left/.code={%
    \pgfmathparse{#1+\tikz@lib@turtle@dir}%
    \ifdim\pgfmathresult pt>360pt\relax%
      \pgfmathparse{\pgfmathresult-360}%
    \fi%
    \global\let\tikz@lib@turtle@dir\pgfmathresult  
  }
}


% Turns the turle left by the given number of degrees
\tikzset{
  turtle right/.default=90,
  turtle right/.code={%
    \pgfmathparse{#1}
    \pgfmathparse{\tikz@lib@turtle@dir-\pgfmathresult}%
    \ifdim\pgfmathresult pt<0pt\relax%
      \pgfmathparse{\pgfmathresult+360}%
    \fi%
    \global\let\tikz@lib@turtle@dir\pgfmathresult  
  }
}




\endinput
