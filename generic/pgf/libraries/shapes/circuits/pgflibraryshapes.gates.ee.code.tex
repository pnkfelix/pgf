% Copyright 2008 by Till Tantau and others Wibrow
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.





%
% Current direction indicator. This shape uses the current setting of
% the current direction arrow tip for the arrow. The shape is a
% rectangle around the arrow tip. 
%

\pgfdeclareshape{direction ee}
{
  \savedanchor\northeast{
    % Right border is given by right extend
    \pgf@x=0pt%
    \csname pgf@arrow@right@\pgfkeysvalueof{/pgf/direction ee arrow}\endcsname
    % Height is given by minimum height/2
    \pgfmathsetlength{\pgf@y}{\pgfkeysvalueof{/pgf/minimum height}}%
    \pgf@y=.5\pgf@y
  }
  \savedanchor\southwest{
    % Left border is given by left extend
    \pgf@x=0pt%
    \csname pgf@arrow@left@\pgfkeysvalueof{/pgf/direction ee arrow}\endcsname
    \pgf@x=-\pgf@x%
    % Height is given by minimum height/2
    \pgfmathsetlength{\pgf@y}{\pgfkeysvalueof{/pgf/minimum height}}%
    \pgf@y=-.5\pgf@y
  }

  \inheritanchor[from=rectangle]{center}
  \inheritanchor[from=rectangle]{north}
  \inheritanchor[from=rectangle]{south}
  \inheritanchor[from=rectangle]{east}
  \inheritanchor[from=rectangle]{west}
  \inheritanchor[from=rectangle]{north east}
  \inheritanchor[from=rectangle]{north west}
  \inheritanchor[from=rectangle]{south east}
  \inheritanchor[from=rectangle]{south west}
  \inheritanchorborder[from=rectangle]
  \nodeparts{}% no text

  \behindbackgroundpath{
    \pgf@process{\southwest}
    \pgf@xa=\pgf@x
    \pgf@process{\northeast}
    \pgf@xb=\pgf@x
    \pgfpathmoveto{\pgfqpoint{\pgf@xa}{0pt}}
    \pgfpathlineto{\pgfqpoint{\pgf@xb}{0pt}}
    \pgfusepathqstroke
  }

  \beforebackgroundpath{
    {
      \pgfsetarrowsend{\pgfkeysvalueof{/pgf/direction ee arrow}}
      \pgfsys@beginscope
      \pgflowlevelsynccm%
      \pgflowlevelobj{}{\pgf@endarrow}%
      \pgfsys@endscope
    }
  }
}

\pgfkeys{
  /pgf/direction ee arrow/.initial=direction ee,
}



% Special arrow for ee directions:

\pgfarrowsdeclare{direction ee}{direction ee}
{
  \pgfmathsetlength\pgfutil@tempdima{\pgfgetarrowoptions{direction ee}}%
  \pgfutil@tempdima=.5\pgfutil@tempdima
  \pgfarrowsleftextend{+-\pgfutil@tempdima}
  \pgfarrowsrightextend{+\pgfutil@tempdima}
}
{
  \pgfmathsetlength\pgfutil@tempdima{\pgfgetarrowoptions{direction ee}}%
  \pgfsetdash{}{+0pt}
  \pgfsetroundjoin
  \pgfpathmoveto{\pgfqpoint{-0.5\pgfutil@tempdima}{0.38268343237\pgfutil@tempdima}}
  \pgfpathlineto{\pgfqpoint{0.5\pgfutil@tempdima}{0\pgfutil@tempdima}}
  \pgfpathlineto{\pgfqpoint{-0.5\pgfutil@tempdima}{-0.38268343237\pgfutil@tempdima}}
  \pgfpathclose
  \pgfusepathqfillstroke
}

\pgfsetarrowoptions{direction ee}{4pt}





\endinput

