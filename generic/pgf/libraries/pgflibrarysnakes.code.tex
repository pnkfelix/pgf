\ProvidesPackageRCS[v\pgfversion] $Header: /cvsroot/pgf/pgf/generic/pgf/libraries/pgflibrarysnakes.code.tex,v 1.3 2005/09/06 21:14:51 tantau Exp $

% Copyright 2005 by Till Tantau <tantau@cs.tu-berlin.de>.
%
% This program can be redistributed and/or modified under the terms
% of the GNU Public License, version 2.


\newdimen\pgfsnakesegmentamplitude
\newdimen\pgfsnakesegmentlength
\def\pgfsnakesegmentangle{45}
\def\pgfsnakesegmentobjectlength{\pgfsnakesegmentamplitude}
\def\pgfsnakesegmentaspect{0.5}

\pgfsnakesegmentlength=10pt
\pgfsnakesegmentamplitude=2.5pt



% zigzag snake
%
% Parameters: \pgfsnakesegmentamplitude, \pgfsnakesegmentlength

\pgfdeclaresnake{zigzag}{up}
{
  \state{up}[switch if less than=.5\pgfsnakesegmentlength to end up,%
             width=.5\pgfsnakesegmentlength,%
             next state=down]
  {
    \pgfpathlineto{\pgfpoint{.25\pgfsnakesegmentlength}{\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{.5\pgfsnakesegmentlength}{0pt}}
  }
  \state{down}[switch if less than=.5\pgfsnakesegmentlength to end down,%
               width=.5\pgfsnakesegmentlength,%
               next state=up]
  {
    \pgfpathlineto{\pgfpoint{.25\pgfsnakesegmentlength}{-\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{.5\pgfsnakesegmentlength}{0pt}}
  }
  \state{end up}[width=\pgfsnakeremainingdistance,
                 next state=final]
  {
    \pgfpathlineto{\pgfpoint{.5\pgfsnakeremainingdistance}{.5\pgfsnakeremainingdistance}}
    \pgfpathlineto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
  \state{end down}[width=\pgfsnakeremainingdistance,
                   next state=final]
  {
    \pgfpathlineto{\pgfpoint{.5\pgfsnakeremainingdistance}{-.5\pgfsnakeremainingdistance}}
    \pgfpathlineto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
  \state{final}{}
}



% saw snake
%
% Parameters: \pgfsnakesegmentamplitude, \pgfsnakesegmentlength

\pgfdeclaresnake{saw}{initial}
{
  \state{initial}[width=\pgfsnakesegmentlength]
  {
    \pgfpathlineto{\pgfpoint{\pgfsnakesegmentlength}{\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{\pgfsnakesegmentlength}{0pt}}
  }
  \state{final}
  {
    \pgfpathlineto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}


% coil snake
%
% Parameters: \pgfsnakesegmentamplitude, \pgfsnakesegmentlength,

\pgfdeclaresnake{coil}{coil}
{
  \state{coil}[switch if less than=%
    1.5\pgfsnakesegmentlength+%
    \pgfsnakesegmentaspect\pgfsnakesegmentamplitude+%
    \pgfsnakesegmentaspect\pgfsnakesegmentamplitude to last,
               width=\pgfsnakesegmentlength]
  {
    \pgfpathcurveto
    {\pgfpoint@oncoil{0    }{ 0.555}{1}}
    {\pgfpoint@oncoil{0.445}{ 1    }{2}}
    {\pgfpoint@oncoil{1    }{ 1    }{3}}
    \pgfpathcurveto
    {\pgfpoint@oncoil{1.555}{ 1    }{4}}
    {\pgfpoint@oncoil{2    }{ 0.555}{5}}
    {\pgfpoint@oncoil{2    }{ 0    }{6}}
    \pgfpathcurveto
    {\pgfpoint@oncoil{2    }{-0.555}{7}}
    {\pgfpoint@oncoil{1.555}{-1    }{8}}
    {\pgfpoint@oncoil{1    }{-1    }{9}}
    \pgfpathcurveto
    {\pgfpoint@oncoil{0.445}{-1    }{10}}
    {\pgfpoint@oncoil{0    }{-0.555}{11}}
    {\pgfpoint@oncoil{0    }{ 0    }{12}}
  }
  \state{last}[width=.5\pgfsnakesegmentlength+%
    \pgfsnakesegmentaspect\pgfsnakesegmentamplitude+%
    \pgfsnakesegmentaspect\pgfsnakesegmentamplitude,next state=final]
  {
    \pgfpathcurveto
    {\pgfpoint@oncoil{0    }{ 0.555}{1}}
    {\pgfpoint@oncoil{0.445}{ 1    }{2}}
    {\pgfpoint@oncoil{1    }{ 1    }{3}}
    \pgfpathcurveto
    {\pgfpoint@oncoil{1.555}{ 1    }{4}}
    {\pgfpoint@oncoil{2    }{ 0.555}{5}}
    {\pgfpoint@oncoil{2    }{ 0    }{6}}
  }
  \state{final}
  {
    \pgfpathlineto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}

\def\pgfpoint@oncoil#1#2#3{%
  \pgf@x=#1\pgfsnakesegmentamplitude%
  \pgf@x=\pgfsnakesegmentaspect\pgf@x%
  \pgf@y=#2\pgfsnakesegmentamplitude%
  \pgf@xa=0.083333333333\pgfsnakesegmentlength%
  \advance\pgf@x by#3\pgf@xa%
}


% bumps snake
%
% Parameters: \pgfsnakesegmentamplitude, \pgfsnakesegmentlength

\pgfdeclaresnake{bumps}{initial}
{
  \state{initial}[width=.5\pgfsnakesegmentlength]
  {
    \pgfpathcurveto
    {\pgfpoint{0pt}{.555\pgfsnakesegmentamplitude}}
    {\pgfpoint{0.11125\pgfsnakesegmentlength}{\pgfsnakesegmentamplitude}}
    {\pgfpoint{.25\pgfsnakesegmentlength}{\pgfsnakesegmentamplitude}}
    \pgfpathcurveto
    {\pgfpoint{.38875\pgfsnakesegmentlength}{\pgfsnakesegmentamplitude}}
    {\pgfpoint{.5\pgfsnakesegmentlength}{.5\pgfsnakesegmentamplitude}}
    {\pgfpoint{.5\pgfsnakesegmentlength}{0\pgfsnakesegmentamplitude}}
  }
  \state{final}
  {
    \pgfpathlineto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}



% expanding waves snake
%
% Parameters: \pgfsnakewaveangle, \pgfsnakesegmentlength

\pgfdeclaresnake{expanding waves}{initial}
{
  \state{initial}[width=\pgfsnakesegmentlength,next state=wave]
  {}

  \state{wave}[width=\pgfsnakesegmentlength]
  {
    \pgfpathmoveto{
      \pgfpointadd
      {\pgfpoint{-\pgfsnakecompleteddistance}{0pt}}%
      {\pgfpointpolar{\pgfsnakesegmentangle}{\pgfsnakecompleteddistance}}}%
    \pgfpatharc{\pgfsnakesegmentangle}{-\pgfsnakesegmentangle}{\pgfsnakecompleteddistance}%
  }
  \state{final}
  {
    \pgfpathmoveto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}



% waves snake
%
% Parameters: \pgfsnakewaveangle, \pgfsnakesegmentlength

\pgfdeclaresnake{waves}{wave}
{
  \state{wave}[width=\pgfsnakesegmentlength]
  {
    \pgftransformxshift{\pgfsnakesegmentlength}
    \pgfpathmoveto{
      \pgfpointadd
      {\pgfpoint{-\pgfsnakesegmentobjectlength}{0pt}}%
      {\pgfpointpolar{\pgfsnakesegmentangle}{\pgfsnakesegmentobjectlength}}}%
    \pgfpatharc{\pgfsnakesegmentangle}{-\pgfsnakesegmentangle}{\pgfsnakesegmentobjectlength}%
  }
  \state{final}
  {
    \pgfpathmoveto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}


% triangle snakes
%
% Parameters: \pgfsnakesegmentlength, \pgfsnakeobjectsize, \pgfsnakesegmentamplitude

\pgfdeclaresnake{triangle}{triangle}
{
  \state{triangle}[switch if less than=\pgfsnakesegmentlength to last,
                   width=\pgfsnakesegmentlength]
  {
    \pgfpathmoveto{\pgfpoint{0pt}{\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{\pgfsnakesegmentobjectlength}{0pt}}
    \pgfpathlineto{\pgfpoint{0pt}{-\pgfsnakesegmentamplitude}}
    \pgfpathclose
  }
  \state{last}[width=\pgfsnakesegmentobjectlength,next state=final]
  {
    \pgfpathmoveto{\pgfpoint{0pt}{\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{\pgfsnakesegmentobjectlength}{0pt}}
    \pgfpathlineto{\pgfpoint{0pt}{-\pgfsnakesegmentamplitude}}
    \pgfpathclose
  }
  \state{final}
  {
    \pgfpathmoveto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}



% ticks snakes
%
% Parameters: \pgfsnakesegmentlength, \pgfsnakesegmentamplitude

\pgfdeclaresnake{ticks}{ticks}
{
  \state{ticks}[width=\pgfsnakesegmentlength]
  {
    \pgfpathmoveto{\pgfpoint{0pt}{\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{0pt}{-\pgfsnakesegmentamplitude}}
  }
  \state{final}
  {
    \pgfpathmoveto{\pgfpoint{0pt}{\pgfsnakesegmentamplitude}}
    \pgfpathlineto{\pgfpoint{0pt}{-\pgfsnakesegmentamplitude}}
    \pgfpathmoveto{\pgfpoint{\pgfsnakeremainingdistance}{0pt}}
  }
}



\endinput
